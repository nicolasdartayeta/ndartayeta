---
interface Job {
  title: string;
  company: string;
  location: string;
  start: string;
  end: string | null;
  bullets: string[];
}

interface Props {
  items: Job[];
}

const { items } = Astro.props;

function formatDate(dateStr: string): string {
  const [year, month] = dateStr.split('-');
  const d = new Date(parseInt(year), parseInt(month) - 1);
  return d.toLocaleDateString('en-US', { month: 'short', year: 'numeric' });
}
---

<section class="mb-12">
  <h2 class="text-[1.1rem] font-semibold tracking-[0.08em] uppercase text-muted mb-5">Experience</h2>
  <div class="flex flex-col gap-4">
    {items.map((job) => (
      <div class="glass p-6">
        <div class="flex items-start justify-between gap-4 flex-wrap mb-3">
          <div>
            <h3 class="text-base font-semibold text-accent mb-0.5">{job.title}</h3>
            <p class="text-[0.875rem] text-muted m-0">
              {job.company} &mdash; <span class="italic">{job.location}</span>
            </p>
          </div>
          <span class="text-[0.8rem] text-muted whitespace-nowrap shrink-0">
            {formatDate(job.start)} &ndash; {job.end ? formatDate(job.end) : 'Present'}
          </span>
        </div>
        <ul class="m-0 pl-5 flex flex-col gap-1">
          {job.bullets.map((b) => (
            <li class="text-[0.9rem] leading-relaxed">{b}</li>
          ))}
        </ul>
      </div>
    ))}
  </div>
</section>
